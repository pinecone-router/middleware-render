function e(e,t,n){let o=(new DOMParser).parseFromString(e,"text/html");o=o.querySelector(t);let r=function(e,t,n){let o=e.querySelectorAll("[x-router]");switch(o.length){case 0:"body"==t&&(n=[]);break;case 1:document.querySelector("[x-router]").setAttribute("x-router",""),o[0].isEqualNode(document.querySelector("[x-router]"))?(o[0].setAttribute("x-router","loaded"),document.querySelector("[x-router]").remove()):(n=[],document.querySelector("[x-router]").remove());break;default:throw new Error("Pinecone Router x-render: there can only be one router in the same page")}return{doc:e,routes:n}}(o,t,n);o=r.doc,function(e,t){document.querySelector(t).innerHTML=e}(e=o.innerHTML,t),window.PineconeRouter.routes=r.routes}const t={version:"0.0.1",name:"x-render",settings:{enabled:!1,selector:"body",preload:!0,preloadtime:200,preloaded:{path:null,content:null}},init(e){if(null!=window.PineconeRouterMiddlewares.find(e=>"x-views"==e.name))throw new Error(`Pinecone Router ${this.name}: Cannot use x-render along with x-views.`);if(e.$el.hasAttribute("x-render")){if(window.PineconeRouter.settings.hash)throw new Error(`Pinecone Router ${this.name}: Cannot use x-render along with x-hash.`);this.settings.enabled=!0;let t=e.$el.getAttribute("x-render");""!=t&&(this.settings.selector=t),window.PineconeRouter.notfound=null,window.PineconeRouter.settings.allowNoHandler=!0}},onLinkIntercepted(e){this.settings.enabled&&this.settings.preload&&e.addEventListener("mouseover",e=>{let t=e.target.getAttribute("href");null==t&&(t="/"),this.settings.preloaded.path!=t&&window.setTimeout(function(){fetch(t).then(e=>e.text()).then(e=>{this.settings.preloaded.path=t,this.settings.preloaded.content=e})},this.settings.preloadtime)})},onHandlersExecuted(t,n,o,r){if(this.settings.enabled&&!o&&!r){if(this.settings.preloaded.path==n)return e(this.settings.preloaded.content,this.settings.selector,window.PineconeRouter.routes),window.PineconeRouter.interceptLinks(),this.settings.preloaded.path=null,this.settings.preloaded.content=null,window.dispatchEvent(window.PineconeRouter.loadend),!1;fetch(n).then(e=>e.text()).then(t=>(e(t,this.settings.selector,window.PineconeRouter.routes),window.PineconeRouter.interceptLinks(),window.dispatchEvent(window.PineconeRouter.loadend),!1))}}};null==window.PineconeRouterMiddlewares?window.PineconeRouterMiddlewares=[t]:window.PineconeRouterMiddlewares.push(t);
//# sourceMappingURL=index.module.js.map
